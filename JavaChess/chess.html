<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-4xl mx-auto flex flex-col items-center">
        <h1 class="text-4xl font-bold mb-2 text-blue-400">Chess</h1>
        <p class="text-gray-400 mb-6">Create or join a game to play real-time multiplayer chess.</p>
        
        <!-- Multiplayer UI -->
        <div id="lobby" class="w-full max-w-2xl bg-gray-800 p-4 rounded-lg shadow-lg mb-4 text-center">
            <h2 class="text-2xl font-bold mb-4">Multiplayer</h2>
            <div class="mb-4">
                <label class="font-semibold">Time Control:</label>
                <select id="timeControlMinutes" class="bg-gray-700 rounded p-1 mx-2">
                    <option value="1">1 min</option>
                    <option value="3" selected>3 min</option>
                    <option value="5">5 min</option>
                    <option value="10">10 min</option>
                </select>
                <label>+ </label>
                <select id="timeControlIncrement" class="bg-gray-700 rounded p-1 mx-2">
                    <option value="0">0 sec</option>
                    <option value="1">1 sec</option>
                    <option value="2" selected>2 sec</option>
                    <option value="5">5 sec</option>
                </select>
                <label>increment</label>
            </div>
            <div class="flex flex-col sm:flex-row gap-4">
                 <button id="createGameBtn" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-md transition duration-200 shadow-md flex-1 disabled:bg-gray-600 disabled:cursor-not-allowed" disabled>Create New Game</button>
                 <div class="flex flex-1">
                    <input type="text" id="gameIdInput" placeholder="Enter Game ID to Join..." class="flex-grow bg-gray-700 text-white border border-gray-600 rounded-l-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-600" disabled>
                    <button id="joinGameBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-r-md transition duration-200 shadow-md disabled:bg-gray-600 disabled:cursor-not-allowed" disabled>Join Game</button>
                 </div>
            </div>
        </div>

        <!-- Game Info Display -->
        <div id="gameInfo" class="w-full max-w-2xl bg-gray-800 p-4 rounded-lg shadow-lg mb-4 text-center text-lg hidden">
             <p>Game ID: <code id="gameIdDisplay" class="bg-gray-700 text-emerald-400 rounded px-2 py-1 cursor-pointer" title="Click to copy"></code></p>
             <p>You are Player: <span id="playerColorDisplay" class="font-bold"></span></p>
             <p>Your User ID: <span id="userIdDisplay" class="font-mono text-xs text-gray-400"></span></p>
             <p>App ID: <span id="appIdDisplay" class="font-mono text-xs text-gray-400"></span></p>
        </div>

        <!-- Timers -->
        <div id="timers" class="w-full max-w-2xl flex justify-between mb-2 text-2xl font-mono hidden">
            <div id="timer-b" class="timer bg-gray-800 p-2 rounded-md shadow-lg">Black: <span id="time-b">00:00</span></div>
            <div id="timer-w" class="timer bg-gray-800 p-2 rounded-md shadow-lg">White: <span id="time-w">00:00</span></div>
        </div>

        <div id="board" class="board mb-6"></div>

        <div class="w-full max-w-2xl bg-gray-800 p-4 rounded-lg shadow-lg">
            <div class="flex flex-col sm:flex-row gap-4">
                <input type="text" id="fenInput" class="flex-grow bg-gray-700 text-white border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="FEN will appear here...">
                <button id="copyFen" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-md transition duration-200 shadow-md">Copy FEN</button>
            </div>
            <div id="status" class="mt-3 text-center text-lg font-medium text-gray-300 h-6">Authenticating...</div>
        </div>
    </div>

    <!-- Promotion Modal -->
    <div id="promotionModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
        <div class="bg-gray-800 p-6 rounded-lg shadow-xl text-center border border-gray-600">
            <h3 class="text-2xl font-bold mb-5 text-white">Promote Pawn to:</h3>
            <div id="promotionChoices" class="flex gap-4"></div>
        </div>
    </div>

    <!-- End Game Modal -->
    <div id="endGameModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
        <div class="bg-gray-800 p-8 rounded-lg shadow-xl text-center border border-gray-600">
            <h3 id="endGameResultText" class="text-3xl font-bold mb-4 text-white"></h3>
            <p id="endGameReasonText" class="text-lg text-gray-300 mb-6"></p>
            <button id="playAgainBtn" class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-4 rounded">Play Again</button>
        </div>
    </div>

    <!-- Notification Element -->
    <div id="notification" class="hidden fixed top-5 right-5 bg-red-600 text-white py-2 px-4 rounded-lg shadow-lg transition-transform transform translate-x-full duration-300">
    </div>


    <script type = "module" src="script.js"></script>
</body>
</html>

